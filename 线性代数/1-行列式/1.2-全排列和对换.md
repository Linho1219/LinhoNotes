# 1.2 全排列和对换

## 排列与逆序数

### 全排列

把 $n$ 个元素按照某种顺序不重不漏地排成一列，称作这 $n$ 个元素的全排列，也称 $n$ 元排列。各种各样的顺序放在一起，所有 $n$ 元排列构成的集合记为 $S_n$，$S_n$ 所含的元素个数即为 $n$ 元排列的个数，记为 $| {{S_n}} |$。

也就是说 $| {{S_n}} | = {\rm A}_n^n = n!$

### 逆序

在某个 $n$ 元排列中，如果存在一个大数排在一个小数前面，就称这**一对数**构成**一个逆序**。

比如，在 6 元排列 $142365$ 中，$(4,2)$、$(4,3)$ 和 $(6,5)$ 各是一个逆序。

一个排列中，逆序的总数称为**逆序数**，上述排列的逆序数记作 $t(142365) = 3$。再比如，有 $t(32514)=5$。

逆序数为奇数的排列，称作**奇排列**；逆序数为偶数的排列，称为**偶排列**。我们在意的不是逆序数本身，而是逆序数的奇偶。

::: example

$$
\begin{align}
& t(n,n-1,\cdots,1)=C_n^2 \\
& t(1,3,5,\cdots,2n-1,2,4,6,\cdots,2n)=1+2+3+\cdots+(n-1)={1\over2}n(n-1)
\end{align}
$$

:::

## 对换

**定理：排列中对换两数的位置，排列的奇偶性改变。**

先考虑最简单的，相邻两个数的对换。

$$
({x_1}{x_2} \cdots {x_n})ab({y_1}{y_2} \cdots {y_m}) \to ({x_1}{x_2} \cdots {x_n})ba({y_1}{y_2} \cdots {y_m})
$$

所有这些逆序：$({x_i},a),({x_i},b),(a,{y_i}),(b,{y_i})$ 该在还是在，本来没有的也不会多出来——因为他们的相对前后位置不会改变。所以我们只需要考虑 $a,b$ 的大小。剩下的事就很简单了：

$$
\left\{\begin{array}l
   a > b & t' = t + 1 \\
   a < b & t' = t - 1 \\
\end{array}\right.
$$

也就是说相邻两个数对换，排列的奇偶性会改变。

下面考虑更一般的情况：

$$
({x_1}{x_2} \cdots {x_n})a\underbrace {{z_1}{z_2} \cdots {z_k}}_{k{\rm{个元素}}}b({y_1}{y_2} \cdots {y_m})
$$

我们将其视为多次相邻对换：

$$
\begin{align}
  & ({x_1}{x_2} \cdots {x_n})a{z_1}{z_2} \cdots {z_k}b({y_1}{y_2} \cdots {y_m}) &\\
   {(1)}
 \longrightarrow & ({x_1}{x_2} \cdots {x_n}){z_1}a{z_2} \cdots {z_k}b({y_1}{y_2} \cdots {y_m}) \\
   {(2)}
 \longrightarrow & ({x_1}{x_2} \cdots {x_n}){z_1}{z_2}a \cdots {z_k}b({y_1}{y_2} \cdots {y_m}) \\
   & \vdots  \\
  {(k)}
 \longrightarrow & ({x_1}{x_2} \cdots {x_n}){z_1}{z_2} \cdots {z_k}ab({y_1}{y_2} \cdots {y_m}) \\
 {(k + 1)}
 \longrightarrow & ({x_1}{x_2} \cdots {x_n}){z_1}{z_2} \cdots {z_k}ba({y_1}{y_2} \cdots {y_m}) \\
 {(k + 1+1)}
 \longrightarrow & ({x_1}{x_2} \cdots {x_n}){z_1}{z_2} \cdots b{z_k}a({y_1}{y_2} \cdots {y_m}) \\
   & \vdots  \\
   {(k+1+k)}
 \longrightarrow & ({x_1}{x_2} \cdots {x_n})b{z_1}{z_2} \cdots {z_k}a({y_1}{y_2} \cdots {y_m}) \\
\end{align}
$$

也就是总共挪了 $2k+1$ 次。显然，$2k+1$ 次加一或减一，最后逆序数必然会改变奇偶。

**推论：对于任意的 $S_n$，其中的奇排列和偶排列的数量必然相等。**

因为把其中所有的排列的前两个数对换，奇排列都变成了偶排列，偶排列都变成了奇排列，而且所有的排列依然不重不漏。显然二者的数量相同。
